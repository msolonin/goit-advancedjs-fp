import{a as M}from"./vendor-Cn2Vr82J.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();const F="https://your-energy.b.goit.study/api/",A=async(e,t)=>{try{const r=`${F}${e}`;return(await M.get(r,{params:t})).data}catch(r){throw r}},k=async(e,t)=>{try{const r=`${F}${e}`;return await M.patch(r,t)}catch(r){throw r}};let m;function P(){window.matchMedia("(min-width: 768px)").matches&&window.matchMedia("(max-width: 1439px)").matches?m=1:window.matchMedia("(min-width: 1439px)").matches?m=2:m=0}P();addEventListener("resize",P);const u="/goit-advancedjs-fp/assets/icons-DRImzY5-.svg",x=document.querySelector(".exercises-container"),se=(e,t)=>{if(e.results.length>0){const r=e.results.map(o=>`
        <div class="exercise-card">
            <div class="exercise-header">
                <p class="exercise-type">Workout</p>
                <div class="${t?"hidden":"visible"} exercise-rating">
                    <p>${o.rating}</p>
                    <svg width="16" height="16">
                        <use href="${u}#icon-star-full"></use>
                    </svg>
                </div>
                <button class="${t?"visible":"hidden"} icon-delete" data-id="${o._id}" aria-label="Delete">
                    <svg width="16" height="16">
                        <use href="${u}#icon-trash"></use>
                    </svg>
                </button>
                <button class="button-start" data-modal-open value=${o._id}>
                    <p>Start</p>
                    <svg width="16" height="16">
                        <use href="${u}#icon-arrow-start"></use>
                    </svg>
                </button>
            </div>
            <div class="exercise-title">
                <svg width="24" height="24">
                    <use href="${u}#icon-runner"></use>
                </svg>
                <h3>${o.name}</h3>
            </div>
            <div class="card-params">
                <div class="exercise-calories">
                    <p>Burned calories: </p>
                    <p>${o.burnedCalories} / ${o.time} min</p>
                </div>
                <div class="exercise-bodypart">
                    <p>Body part: </p>
                    <p>${o.bodyPart}</p>
                </div>
                <div class="exercise-target">
                    <p>Target: </p>
                    <p>${o.target}</p>
                </div>
            </div>
        </div>
    `).join("");x.innerHTML=`<ul class="exercises-list">${r}</ul`}else x.innerHTML=`<div class="nothing-found">
        <p class="hero-desc"> Nothing found</p>
      </div`};function N(){return JSON.parse(localStorage.getItem("favorites"))??[]}function H(e){const t=JSON.parse(localStorage.getItem("favorites"))??[];t.push(e),localStorage.setItem("favorites",JSON.stringify(t))}function U(e){const t=JSON.parse(localStorage.getItem("favorites"))??[];t.splice(t.indexOf(e),1),localStorage.setItem("favorites",JSON.stringify(t))}const j=document.querySelector("[data-modal-close]"),c=document.querySelector(".modal"),y=document.querySelector("[data-modal]"),S=document.querySelector(".btn-modal-add-fav");let f="";async function J(e){f=e;const t=await A(`exercises/${f}`);z(t),N().indexOf(f)>=0?(S.classList.add("fav-added"),document.querySelector(".btn-fav-text").textContent="Remove from favorites",document.querySelector(".icon-fav-btn-use").setAttribute("href",`${u}#icon-trash`)):(S.classList.remove("fav-added"),document.querySelector(".btn-fav-text").textContent="Add to favorites",document.querySelector(".icon-fav-btn-use").setAttribute("href",`${u}#icon-heart`)),Q(),y.classList.toggle("visually-hidden"),T()}function W(){document.querySelector(".img-modal-exercise").src="",document.querySelector(".title-modal").textContent="",document.querySelector(".rating-value").textContent="0",document.querySelector(".stats-list").innerHTML="",document.querySelector(".desc-text").textContent=""}function z(e){W(),document.querySelector(".img-modal-exercise").src=e.gifUrl,document.querySelector(".title-modal").textContent=e.name.trim(),document.querySelector(".desc-text").textContent=e.description.trim(),document.querySelector(".rating-value").textContent=e.rating;const t=document.querySelectorAll(".icon-modal-star"),r=Math.floor(e.rating);for(let n=0;n<t.length;n++)t[n].classList.remove("gold"),t[n].classList.remove("gold-half"),n<r&&t[n].classList.add("gold");if(e.rating-Math.floor(e.rating)!==0){const n=Math.floor((e.rating-r)*100),i=document.querySelectorAll(".gradient-middle");for(let d=0;d<i.length;d++)i[d].setAttribute("offset",`${n}%`);t[r].classList.add("gold-half")}const o=document.querySelector(".stats-list");o.innerHTML="",b="",e.target!==""&&g("Target",e.target),e.bodyPart!==""&&g("BodyPart",e.bodyPart),e.equipment!==""&&g("Equipment",e.equipment),e.popularity!==""&&g("Popular",e.popularity),e.burnedCalories!==""&&g("Burned Calories",e.burnedCalories+"/"+e.time+" min"),o.insertAdjacentHTML("beforeend",b)}function Q(){S.addEventListener("click",e=>{const t=e.currentTarget;t.classList.toggle("fav-added"),t.classList.contains("fav-added")?(H(f),document.querySelector(".btn-fav-text").textContent="Remove from favorites",document.querySelector(".icon-fav-btn-use").setAttribute("href",`${u}#icon-trash`)):(U(f),document.querySelector(".btn-fav-text").textContent="Add to favorites",document.querySelector(".icon-fav-btn-use").setAttribute("href",`${u}#icon-heart`)),e.stopImmediatePropagation()})}let b="";function g(e,t){b+=`<li class="stats-item">
              <p class="stats-title">${e}</p>
              <p class="stats-value">${t}</p>
            </li>`}function ie(){const e=document.querySelectorAll("[data-modal-open]");for(let t=0;t<e.length;t++)e[t].addEventListener("click",r=>{const o=r.currentTarget;J(o.value)})}j.addEventListener("click",()=>{y.classList.add("visually-hidden"),q()});y.addEventListener("click",e=>{let t="";c.classList.contains("visually-hidden")?l.classList.contains("visually-hidden")||(t=l.getBoundingClientRect()):t=c.getBoundingClientRect(),t&&(t.top<=e.clientY&&e.clientY<=t.top+t.height&&t.left<=e.clientX&&e.clientX<=t.left+t.width||(c.classList.contains("visually-hidden")?l.classList.contains("visually-hidden")||(l.classList.add("visually-hidden"),c.classList.remove("visually-hidden"),L(l.querySelector("form"))):(y.classList.add("visually-hidden"),q()))),e.stopImmediatePropagation()});function O(e){e.key==="Escape"&&(c.classList.contains("visually-hidden")?l.classList.contains("visually-hidden")||(l.classList.add("visually-hidden"),c.classList.remove("visually-hidden"),L(l.querySelector("form"))):(y.classList.add("visually-hidden"),q()))}function T(){document.addEventListener("keydown",O),document.querySelector("body").classList.add("modal-open"),document.querySelector(".scroll-up-button").style.visibility="hidden"}function q(){document.removeEventListener("keydown",O),document.querySelector("body").classList.remove("modal-open"),document.querySelector(".scroll-up-button").style.visibility="visible"}const l=document.querySelector(".add-rating-modal"),Y=document.querySelector("[data-add-rating-open]");Y.addEventListener("click",e=>{l.classList.remove("visually-hidden"),c.classList.add("visually-hidden"),T(),Z(),e.stopImmediatePropagation()});const _=document.querySelector("[data-add-rating-close]");_.addEventListener("click",e=>{l.classList.add("visually-hidden"),c.classList.remove("visually-hidden"),L(l.querySelector("form")),e.stopImmediatePropagation()});function L(e){e.elements.email.value="",e.elements.comment.value="";for(let t of e.elements.radio)t.checked=!1;p=0,document.querySelector(".add-rating-value").textContent="0";for(let t of document.querySelectorAll(".icon-modal-rating-star"))t.classList.remove("gold")}let p=0;function Z(){p=0;const e=document.querySelectorAll(".add-rating-radio-btn");for(let t of e)t.addEventListener("click",r=>{const o=r.currentTarget.value;p=Number(o),document.querySelector(".add-rating-value").textContent=o;const n=document.querySelectorAll(".icon-modal-rating-star");for(let i=0;i<n.length;i++)n[i].classList.remove("gold"),i<o&&n[i].classList.add("gold");r.stopImmediatePropagation()})}const K=document.querySelector(".add-rating-form");K.addEventListener("submit",e=>{e.preventDefault();const t=e.target,r=t.elements.email.value,o=t.elements.comment.value;return p?r?o?k(`exercises/${f}/rating`,{rate:p,email:r,review:o}).then(n=>(l.classList.add("visually-hidden"),L(t),c.classList.remove("visually-hidden"),e.stopImmediatePropagation(),!0)).catch(n=>{n.status==400?alert("Error 400: Bad request"):n.status==404?alert("Error 404: Such exercise not found"):n.status==409?alert("Error 409: Such email already exists"):n.status==500?alert("Error 500: Server error"):alert("Error: While sending your review something happend :(")}):alert("Leave a comment"):alert("Enter your email"):alert("Choose your rate"),e.stopImmediatePropagation(),!1});const E=document.querySelector(".js-mobile-menu");let w=window.location.pathname.split("/").pop();w===""&&(w="index.html");const $=E.querySelector(`.nav-link[href='./${w}']`);$&&$.classList.add("active");const G=document.querySelector(".js-open-menu"),V=document.querySelector(".js-close-menu");G.addEventListener("click",function(){E.classList.add("active")});V.addEventListener("click",function(){E.classList.remove("active")});(async()=>{const e={text:'Unfortunately, there was an error on the server, but as they say: "Even in failure, wisdom finds its voice."',author:'Team "Your Enegry"'},t=n(),r={text:e.text,author:e.author};if(d(t)&&R(t.date))r.text=t.text,r.author=t.author;else try{await o(r)}catch(s){console.log(s)}i(r);async function o(s){const a=await A("quote");s.text=a.quote,s.author=a.author,localStorage.setItem("quote",JSON.stringify({text:a.quote,author:a.author,date:new Date}))}function n(){let s;try{s=JSON.parse(localStorage.getItem("quote"))}catch(a){console.error(a)}return s}function i(s){const a=document.querySelector(".quote-desc"),h=document.querySelector(".quote-author");a.textContent=s.text,h.textContent=s.author,a.classList.remove("skeleton"),h.classList.remove("skeleton")}function d(s){return s&&typeof(s==null?void 0:s.text)=="string"&&typeof(s==null?void 0:s.author)=="string"&&typeof(s==null?void 0:s.date)=="string"}function R(s){let a=new Date(s),h=new Date;return h.setHours(0,0,0,0),a.setHours(0,0,0,0),a.getTime()===h.getTime()}})();const X=`
    <svg width="100" height="100" viewBox="0 0 100 100" fill="none">
    <circle cx="50" cy="50" r="50" fill="#242424"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M51.6192 37.4778L51.6192 63.0059L48.9033 63.0059L48.9033 37.4778L36.1392 50.2419L34.2187 48.3214L50.2612 32.2789L66.3037 48.3214L64.3833 50.2419L51.6192 37.4778Z" fill="#F4F4F4" stroke="#F4F4F4" stroke-width="0.3"/>
</svg>
`,D=`
    <svg width="40" height="40" viewBox="0 0 100 100" fill="none">
        <circle cx="50" cy="50" r="50" fill="#242424"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M51.6192 37.4778L51.6192 63.0059L48.9033 63.0059L48.9033 37.4778L36.1392 50.2419L34.2187 48.3214L50.2612 32.2789L66.3037 48.3214L64.3833 50.2419L51.6192 37.4778Z" fill="#F4F4F4" stroke="#F4F4F4" stroke-width="0.3"/>
    </svg>
`,v=document.querySelector(".scroll-up-button");let C=m;function ee(){window.scrollTo({top:0,behavior:"smooth"})}function B(){return window.pageYOffset===0||document.documentElement.scrollTop===0}function te(){B()?v.style.visibility="hidden":v.style.visibility="visible"}function I(){m===0?v.innerHTML=D:v.innerHTML=X}function oe(){I(),v.addEventListener("click",ee),window.addEventListener("scroll",te),B()&&(v.style.visibility="hidden")}oe();addEventListener("resize",()=>{m!==C&&(C=m,I())});document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("subscriptionForm");e&&e.addEventListener("submit",ne)});function ne(e){e.preventDefault();const t=document.querySelector(".e-mail-input");/^\w+(\.\w+)?@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/.test(t.value)?(console.log("Valid email, sending request to backend."),fetch("https://your-energy.b.goit.study/api/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.value})}).then(o=>{if(o.status===201)return o.json();throw o.status===400?new Error("Bad request (invalid request body)"):o.status===404?new Error("Not found"):o.status===409?new Error("Subscription already exists"):o.status===500?new Error("Server error"):new Error("Unexpected error")}).then(o=>{console.log(o),alert(o.message||"Subscription successful!"),t.value=""}).catch(o=>{console.error("Error:",o),alert(o.message||"Subscription failed. Please try again.")})):(console.log("Invalid email format."),alert("Please enter a valid email address."))}export{N as G,ie as L,U as R,se as a,m as c,A as r};
//# sourceMappingURL=main-DcCtD3sr.js.map
