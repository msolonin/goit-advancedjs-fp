{"version":3,"file":"index.js","sources":["../src/js/filters.js"],"sourcesContent":["import { request } from './services/api-service';\nimport { currentResolution } from './utils/utils.js';\n\nconst filterButtons = document.querySelectorAll('.filter-button');\nconst filterPagination = document.querySelector('.filter-pagination');\n\nlet requestBase = { path: 'filters', params: { filter: 'Muscles' } };\nlet filterPage = 1;\nlet filterLimit = 9;\nlet lastResolution = currentResolution;\n\nfunction drawFilterContent(data) {\n  // TODO: Draw the content based on the data\n  console.log(data);\n}\n\n// Process the current request\nasync function processCurrentRequest(shouldDraw = true) {\n  const params = {\n    ...requestBase.params,\n    page: filterPage,\n    limit: filterLimit,\n  };\n  const data = await request(requestBase.path, params);\n  if (shouldDraw) {\n    drawFilterContent(data);\n  }\n  return data;\n}\n\nfunction updateTitle() {\n  const title = document.querySelector('.filter-title');\n  if (requestBase.path === 'filters') {\n    title.innerHTML = 'Exercises';\n  }\n}\n\nfunction updateActivePaginationButton() {\n  const buttons = document.querySelectorAll('.filters-pagination-button');\n  buttons.forEach(btn => {\n    btn.classList.remove('filters-pagination-button-active');\n    if (parseInt(btn.innerHTML) === filterPage) {\n      btn.classList.add('filters-pagination-button-active');\n    }\n  });\n}\n\nconst handlePaginationButtonClick = async (btn, forceProcess = false) => {\n  // Do not process the request if the button is already active\n  if (\n    !forceProcess &&\n    btn.classList.contains('filters-pagination-button-active')\n  ) {\n    return;\n  }\n  filterPage = parseInt(btn.innerHTML);\n  updateActivePaginationButton();\n  await processCurrentRequest();\n};\n\nasync function drawPagination() {\n  // Clear the pagination\n  filterPagination.innerHTML = '';\n  // Get total number of pages(filters=2,exercises=3)\n  const data = await processCurrentRequest(false);\n  const totalPages = data.totalPages;\n  // Add <li> to the pagination for each counter while button inside\n  for (let i = 1; i <= totalPages; i++) {\n    const li = document.createElement('li');\n    const button = document.createElement('button');\n    button.innerHTML = i;\n    button.classList.add('filters-pagination-button');\n    li.appendChild(button);\n    filterPagination.appendChild(li);\n  }\n  // Add event listener to all buttons\n  const buttons = document.querySelectorAll('.filters-pagination-button');\n  buttons.forEach(btn => {\n    btn.addEventListener('click', () => {\n      handlePaginationButtonClick(btn);\n    });\n  });\n  // Set active button with page = filterPage\n  updateActivePaginationButton();\n  // Press active button to draw the content\n  handlePaginationButtonClick(\n    document.querySelector('.filters-pagination-button-active'),\n    true\n  );\n}\n\nfunction calculateFilterLimit() {\n  switch (currentResolution) {\n    case 0:\n      filterLimit = 9;\n      break;\n    case 1:\n      filterLimit = 12;\n      break;\n    case 2:\n      filterLimit = 12;\n      break;\n  }\n}\n\nconst handleFilterButtonClick = async btn => {\n  filterPage = 1;\n  // Get filter\n  const filter = btn.innerHTML;\n  // Get limit\n  calculateFilterLimit();\n  // Remove filter-button-active for all buttons\n  filterButtons.forEach(btn => {\n    btn.classList.remove('filter-button-active');\n  });\n  // Add filter-button-active to the clicked button\n  btn.classList.add('filter-button-active');\n\n  requestBase = { path: 'filters', params: { filter } };\n  updateTitle();\n  await drawPagination();\n};\n\n// Register all the filter-button clicks to the handleFilterButtonClick function\nfilterButtons.forEach(btn => {\n  btn.addEventListener('click', () => {\n    handleFilterButtonClick(btn);\n  });\n});\n\n// OnPageLoaded -> press default active button\ndocument.addEventListener('DOMContentLoaded', async () => {\n  const musclesButton = document.querySelector('.filter-button-active');\n  handleFilterButtonClick(musclesButton);\n});\n\n// Redraw on resolution change\naddEventListener('resize', async () => {\n  if (currentResolution === lastResolution) {\n    return;\n  }\n  lastResolution = currentResolution;\n  calculateFilterLimit();\n  await drawPagination();\n});\n"],"names":["filterButtons","filterPagination","requestBase","filterPage","filterLimit","lastResolution","currentResolution","drawFilterContent","data","processCurrentRequest","shouldDraw","params","request","updateTitle","title","updateActivePaginationButton","btn","handlePaginationButtonClick","forceProcess","drawPagination","totalPages","i","li","button","calculateFilterLimit","handleFilterButtonClick","filter","musclesButton"],"mappings":"yFAGA,MAAMA,EAAgB,SAAS,iBAAiB,gBAAgB,EAC1DC,EAAmB,SAAS,cAAc,oBAAoB,EAEpE,IAAIC,EAAc,CAAE,KAAM,UAAW,OAAQ,CAAE,OAAQ,SAAS,GAC5DC,EAAa,EACbC,EAAc,EACdC,EAAiBC,EAErB,SAASC,EAAkBC,EAAM,CAE/B,QAAQ,IAAIA,CAAI,CAClB,CAGA,eAAeC,EAAsBC,EAAa,GAAM,CACtD,MAAMC,EAAS,CACb,GAAGT,EAAY,OACf,KAAMC,EACN,MAAOC,CACX,EACQI,EAAO,MAAMI,EAAQV,EAAY,KAAMS,CAAM,EACnD,OAAID,GACFH,EAAkBC,CAAI,EAEjBA,CACT,CAEA,SAASK,GAAc,CACrB,MAAMC,EAAQ,SAAS,cAAc,eAAe,EAChDZ,EAAY,OAAS,YACvBY,EAAM,UAAY,YAEtB,CAEA,SAASC,GAA+B,CACtB,SAAS,iBAAiB,4BAA4B,EAC9D,QAAQC,GAAO,CACrBA,EAAI,UAAU,OAAO,kCAAkC,EACnD,SAASA,EAAI,SAAS,IAAMb,GAC9Ba,EAAI,UAAU,IAAI,kCAAkC,CAE1D,CAAG,CACH,CAEA,MAAMC,EAA8B,MAAOD,EAAKE,EAAe,KAAU,CAGrE,CAACA,GACDF,EAAI,UAAU,SAAS,kCAAkC,IAI3Db,EAAa,SAASa,EAAI,SAAS,EACnCD,IACA,MAAMN,EAAqB,EAC7B,EAEA,eAAeU,GAAiB,CAE9BlB,EAAiB,UAAY,GAG7B,MAAMmB,GADO,MAAMX,EAAsB,EAAK,GACtB,WAExB,QAASY,EAAI,EAAGA,GAAKD,EAAYC,IAAK,CACpC,MAAMC,EAAK,SAAS,cAAc,IAAI,EAChCC,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,UAAYF,EACnBE,EAAO,UAAU,IAAI,2BAA2B,EAChDD,EAAG,YAAYC,CAAM,EACrBtB,EAAiB,YAAYqB,CAAE,CAChC,CAEe,SAAS,iBAAiB,4BAA4B,EAC9D,QAAQN,GAAO,CACrBA,EAAI,iBAAiB,QAAS,IAAM,CAClCC,EAA4BD,CAAG,CACrC,CAAK,CACL,CAAG,EAEDD,IAEAE,EACE,SAAS,cAAc,mCAAmC,EAC1D,EACJ,CACA,CAEA,SAASO,GAAuB,CAC9B,OAAQlB,EAAiB,CACvB,IAAK,GACHF,EAAc,EACd,MACF,IAAK,GACHA,EAAc,GACd,MACF,IAAK,GACHA,EAAc,GACd,KACH,CACH,CAEA,MAAMqB,EAA0B,MAAMT,GAAO,CAC3Cb,EAAa,EAEb,MAAMuB,EAASV,EAAI,UAEnBQ,IAEAxB,EAAc,QAAQgB,GAAO,CAC3BA,EAAI,UAAU,OAAO,sBAAsB,CAC/C,CAAG,EAEDA,EAAI,UAAU,IAAI,sBAAsB,EAExCd,EAAc,CAAE,KAAM,UAAW,OAAQ,CAAE,OAAAwB,CAAM,GACjDb,IACA,MAAMM,EAAc,CACtB,EAGAnB,EAAc,QAAQgB,GAAO,CAC3BA,EAAI,iBAAiB,QAAS,IAAM,CAClCS,EAAwBT,CAAG,CAC/B,CAAG,CACH,CAAC,EAGD,SAAS,iBAAiB,mBAAoB,SAAY,CACxD,MAAMW,EAAgB,SAAS,cAAc,uBAAuB,EACpEF,EAAwBE,CAAa,CACvC,CAAC,EAGD,iBAAiB,SAAU,SAAY,CACjCrB,IAAsBD,IAG1BA,EAAiBC,EACjBkB,IACA,MAAML,EAAc,EACtB,CAAC"}