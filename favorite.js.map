{"version":3,"file":"favorite.js","sources":["../src/js/favorite.js"],"sourcesContent":["import { renderExercises } from './exercises.js';\nimport { LoadListenersForOpenModal } from './modal.js';\nimport { GetFavorites, RemoveFromFavorites } from './utils/local-storage.js';\nimport { request } from './services/api-service.js';\n\nconst modal = document.querySelector('[data-modal]');\n\ndocument.addEventListener('DOMContentLoaded', async function () {\n  const noFavoritesMessage = document.getElementById('no-favorites');\n  let cardList = document.querySelector('.exercises-container');\n  let favoritesIDs = GetFavorites();\n\n  async function fetchFavoriteData(favoritesIDs) {\n    const favoritesData = await Promise.all(\n      favoritesIDs.map(async id => {\n        try {\n          return await request(`exercises/${id}`);\n        } catch (error) {\n          console.error(`Error fetching data for ID ${id}:`, error);\n          return null;\n        }\n      })\n    );\n    return favoritesData.filter(exercise => exercise !== null);\n  }\n\n  async function displayFavorites() {\n    if (!cardList) {\n      console.error('No element found with the class \"exercises-container\".');\n      return;\n    }\n\n    cardList.innerHTML = '';\n\n    if (favoritesIDs.length === 0) {\n      noFavoritesMessage.style.display = 'block';\n    } else {\n      noFavoritesMessage.style.display = 'none';\n\n      const favoritesData = await fetchFavoriteData(favoritesIDs);\n      renderExercises({ results: favoritesData }, true);\n      LoadListenersForOpenModal();\n      attachDeleteListeners();\n    }\n  }\n\n  function attachDeleteListeners() {\n    const deleteButtons = document.querySelectorAll('.icon-delete');\n    deleteButtons.forEach(button => {\n      button.addEventListener('click', () => {\n        const exerciseID = button.getAttribute('data-id');\n        RemoveFromFavorites(exerciseID);\n        favoritesIDs = GetFavorites();\n        displayFavorites();\n      });\n    });\n  }\n\n  window.addEventListener('click', function (event) {\n    if (event.target === modal || event.target.closest('[data-modal-close]')) {\n      modal.classList.add('hidden');\n      favoritesIDs = GetFavorites();\n      displayFavorites();\n    }\n  });\n\n  await displayFavorites();\n});\n"],"names":["modal","noFavoritesMessage","cardList","favoritesIDs","GetFavorites","fetchFavoriteData","id","request","error","exercise","displayFavorites","favoritesData","renderExercises","LoadListenersForOpenModal","attachDeleteListeners","button","exerciseID","RemoveFromFavorites","event"],"mappings":"8GAKA,MAAMA,EAAQ,SAAS,cAAc,cAAc,EAEnD,SAAS,iBAAiB,mBAAoB,gBAAkB,CAC9D,MAAMC,EAAqB,SAAS,eAAe,cAAc,EACjE,IAAIC,EAAW,SAAS,cAAc,sBAAsB,EACxDC,EAAeC,IAEnB,eAAeC,EAAkBF,EAAc,CAW7C,OAVsB,MAAM,QAAQ,IAClCA,EAAa,IAAI,MAAMG,GAAM,CAC3B,GAAI,CACF,OAAO,MAAMC,EAAQ,aAAaD,CAAE,EAAE,CACvC,OAAQE,EAAO,CACd,eAAQ,MAAM,8BAA8BF,CAAE,IAAKE,CAAK,EACjD,IACR,CACT,CAAO,CACP,GACyB,OAAOC,GAAYA,IAAa,IAAI,CAC1D,CAED,eAAeC,GAAmB,CAChC,GAAI,CAACR,EAAU,CACb,QAAQ,MAAM,wDAAwD,EACtE,MACD,CAID,GAFAA,EAAS,UAAY,GAEjBC,EAAa,SAAW,EAC1BF,EAAmB,MAAM,QAAU,YAC9B,CACLA,EAAmB,MAAM,QAAU,OAEnC,MAAMU,EAAgB,MAAMN,EAAkBF,CAAY,EAC1DS,EAAgB,CAAE,QAASD,CAAe,EAAE,EAAI,EAChDE,IACAC,GACD,CACF,CAED,SAASA,GAAwB,CACT,SAAS,iBAAiB,cAAc,EAChD,QAAQC,GAAU,CAC9BA,EAAO,iBAAiB,QAAS,IAAM,CACrC,MAAMC,EAAaD,EAAO,aAAa,SAAS,EAChDE,EAAoBD,CAAU,EAC9Bb,EAAeC,EAAY,EAC3BM,GACR,CAAO,CACP,CAAK,CACF,CAED,OAAO,iBAAiB,QAAS,SAAUQ,EAAO,EAC5CA,EAAM,SAAWlB,GAASkB,EAAM,OAAO,QAAQ,oBAAoB,KACrElB,EAAM,UAAU,IAAI,QAAQ,EAC5BG,EAAeC,EAAY,EAC3BM,IAEN,CAAG,EAED,MAAMA,EAAgB,CACxB,CAAC"}